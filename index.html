<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Claw Machine Ultimate</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:black;
    color:white;
    text-align:center;
    overflow:hidden;
}

/* ===== NEON INTRO ===== */
#intro{
    position:fixed;
    inset:0;
    background:radial-gradient(circle,#0ff,#000);
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    animation:pulse 2s infinite alternate;
    z-index:5;
}

@keyframes pulse{
    from{filter:brightness(1);}
    to{filter:brightness(1.5);}
}

.neon{
    font-size:40px;
    text-shadow:0 0 10px #0ff,0 0 20px #0ff,0 0 40px #0ff;
}

#startBtn{
    margin-top:20px;
    padding:15px 25px;
    font-size:18px;
    background:black;
    color:#0ff;
    border:2px solid #0ff;
    border-radius:10px;
}

/* ===== GAME AREA ===== */
#game{
    width:450px;
    height:600px;
    margin:10px auto;
    background:#111;
    border:6px solid #0ff;
    border-radius:20px;
    position:relative;
    overflow:hidden;
    box-shadow:0 0 25px #0ff;
}

#claw{
    position:absolute;
    top:0;
    left:190px;
    width:60px;
    height:120px;
    transition:top 0.2s;
}

.cable{
    width:6px;
    height:70px;
    background:linear-gradient(#aaa,#555);
    margin:auto;
}

.claw-head{
    width:60px;
    height:20px;
    background:linear-gradient(#eee,#777);
    border-radius:10px;
    position:relative;
}

.arm{
    position:absolute;
    width:6px;
    height:40px;
    background:silver;
    bottom:-35px;
    transform-origin:top center;
    transition:0.3s;
}

.left-arm{ left:10px; transform:rotate(25deg); }
.right-arm{ right:10px; transform:rotate(-25deg); }

.grab .left-arm{ transform:rotate(5deg); }
.grab .right-arm{ transform:rotate(-5deg); }

#prize-area{
    position:absolute;
    bottom:0;
    width:100%;
    height:240px;
}

.prize{
    width:40px;
    height:40px;
    border-radius:50%;
    position:absolute;
    animation:float 3s infinite alternate ease-in-out;
}

@keyframes float{
    from{transform:translateY(0);}
    to{transform:translateY(-20px);}
}

.common{background:#3498db;}
.rare{background:#9b59b6;}
.epic{background:gold;}
.boss{
    background:red;
    width:60px;
    height:60px;
    box-shadow:0 0 20px red;
}

/* INFO */
#info{
    font-size:14px;
}

#leaderboard{
    margin-top:5px;
    font-size:13px;
}
</style>
</head>
<body>

<!-- INTRO SCREEN -->
<div id="intro">
    <div class="neon">üéÆ CLAW MACHINE ULTIMATE üéÆ</div>
    <button id="startBtn" onclick="startIntro()">START GAME</button>
</div>

<h2>2 Player Battle Mode</h2>

<div id="game">
    <div id="claw">
        <div class="cable"></div>
        <div class="claw-head">
            <div class="arm left-arm"></div>
            <div class="arm right-arm"></div>
        </div>
    </div>
    <div id="prize-area"></div>
</div>

<div id="info">
Current Player: <span id="playerTurn">1</span> |
P1: <span id="score1">0</span> |
P2: <span id="score2">0</span>
</div>

<div id="leaderboard">
üåç Global Top Scores
<ol id="scoresList"></ol>
</div>

<script>
const claw=document.getElementById("claw");
const prizeArea=document.getElementById("prize-area");

let clawX=190;
let dropping=false;
let player=1;
let scores={1:0,2:0};
let audioCtx;
let musicInterval;

/* ===== INTRO + MUSIC ===== */
function startIntro(){
    document.getElementById("intro").style.display="none";
    audioCtx=new(window.AudioContext||window.webkitAudioContext)();
    startMusic();
    createPrizes();
}

function startMusic(){
    musicInterval=setInterval(()=>{
        playTone(220,0.2);
        setTimeout(()=>playTone(440,0.2),200);
    },600);
}

function playTone(freq,duration){
    const osc=audioCtx.createOscillator();
    const gain=audioCtx.createGain();
    osc.connect(gain);
    gain.connect(audioCtx.destination);
    osc.frequency.value=freq;
    gain.gain.setValueAtTime(0.1,audioCtx.currentTime);
    osc.start();
    osc.stop(audioCtx.currentTime+duration);
}

/* ===== PRIZES ===== */
function createPrizes(){
    prizeArea.innerHTML="";
    for(let i=0;i<6;i++){
        let p=document.createElement("div");
        p.className="prize common";
        p.dataset.points=1;
        p.dataset.chance=0.8;
        p.style.left=Math.random()*380+"px";
        p.style.bottom=Math.random()*180+"px";
        prizeArea.appendChild(p);
    }

    // Rare
    let rare=document.createElement("div");
    rare.className="prize rare";
    rare.dataset.points=3;
    rare.dataset.chance=0.5;
    rare.style.left=Math.random()*380+"px";
    rare.style.bottom="100px";
    prizeArea.appendChild(rare);

    // Boss Prize
    let boss=document.createElement("div");
    boss.className="prize boss";
    boss.dataset.points=10;
    boss.dataset.chance=0.2;
    boss.style.left="180px";
    boss.style.bottom="150px";
    prizeArea.appendChild(boss);
}

/* ===== GAMEPLAY ===== */
function moveClaw(dir){
    if(dropping)return;
    clawX+=dir;
    clawX=Math.max(0,Math.min(380,clawX));
    claw.style.left=clawX+"px";
}

function dropClaw(){
    if(dropping)return;
    dropping=true;
    claw.classList.add("grab");

    let y=0;
    let interval=setInterval(()=>{
        y+=10;
        claw.style.top=y+"px";
        if(y>=420){
            clearInterval(interval);
            checkCatch();
        }
    },30);
}

function checkCatch(){
    const prizes=document.querySelectorAll(".prize");
    prizes.forEach(p=>{
        const pr=p.getBoundingClientRect();
        const cr=claw.getBoundingClientRect();
        if(cr.left<pr.right&&cr.right>pr.left&&cr.bottom>pr.top){
            if(Math.random()<p.dataset.chance){
                scores[player]+=parseInt(p.dataset.points);
                p.remove();
            }
        }
    });

    document.getElementById("score1").innerText=scores[1];
    document.getElementById("score2").innerText=scores[2];

    player=player===1?2:1;
    document.getElementById("playerTurn").innerText=player;

    setTimeout(()=>{
        claw.style.top="0";
        claw.classList.remove("grab");
        dropping=false;
    },500);
}

/* ===== ONLINE LEADERBOARD (SIMULATED) ===== */
let globalBoard=JSON.parse(localStorage.getItem("globalBoard"))||[15,12,10,8,5];

function updateLeaderboard(){
    globalBoard.push(scores[1]);
    globalBoard.push(scores[2]);
    globalBoard.sort((a,b)=>b-a);
    globalBoard=globalBoard.slice(0,5);
    localStorage.setItem("globalBoard",JSON.stringify(globalBoard));
    displayLeaderboard();
}

function displayLeaderboard(){
    let list=document.getElementById("scoresList");
    list.innerHTML="";
    globalBoard.forEach(s=>{
        let li=document.createElement("li");
        li.innerText=s;
        list.appendChild(li);
    });
}

document.addEventListener("keydown",e=>{
    if(e.key==="ArrowLeft")moveClaw(-25);
    if(e.key==="ArrowRight")moveClaw(25);
    if(e.key===" ")dropClaw();
});

displayLeaderboard();
</script>

</body>
</html>
