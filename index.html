<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Claw Machine Cyberpunk</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    font-family:'Orbitron',sans-serif;
    background:radial-gradient(circle at center,#0f0f2e,#000);
    color:#0ff;
    text-align:center;
}

h2{
    text-shadow:0 0 10px #0ff;
}

#game{
    width:90vw;
    max-width:450px;
    height:75vh;
    max-height:620px;
    margin:10px auto;
    background:linear-gradient(180deg,#111,#000);
    border:4px solid #0ff;
    border-radius:20px;
    position:relative;
    overflow:hidden;
    box-shadow:0 0 30px #0ff, inset 0 0 40px #00f;
}

/* CLAW */
#claw{
    position:absolute;
    top:0;
    left:190px;
    width:60px;
    height:120px;
    transition:top 0.2s;
}

.cable{
    width:6px;
    height:70px;
    background:linear-gradient(#aaa,#555);
    margin:auto;
}

.claw-head{
    width:60px;
    height:20px;
    background:linear-gradient(#0ff,#00aaff);
    border-radius:10px;
    position:relative;
}

.arm{
    position:absolute;
    width:6px;
    height:40px;
    background:#0ff;
    bottom:-35px;
    transform-origin:top center;
    transition:0.3s;
}

.left-arm{ left:10px; transform:rotate(25deg); }
.right-arm{ right:10px; transform:rotate(-25deg); }

.grab .left-arm{ transform:rotate(5deg); }
.grab .right-arm{ transform:rotate(-5deg); }

/* PRIZES */
#prize-area{
    position:absolute;
    bottom:0;
    width:100%;
    height:240px;
}

.prize{
    width:40px;
    height:40px;
    border-radius:50%;
    position:absolute;
    animation:float 3s infinite alternate ease-in-out;
}

@keyframes float{
    from{transform:translateY(0);}
    to{transform:translateY(-15px);}
}

.common{background:#3498db;}
.rare{background:#9b59b6;}
.epic{background:gold;}
.boss{
    background:red;
    width:60px;
    height:60px;
    box-shadow:0 0 20px red;
}

/* UI */
button{
    background:black;
    border:2px solid #0ff;
    color:#0ff;
    padding:6px 10px;
    margin:4px;
    cursor:pointer;
}

button:hover{
    background:#0ff;
    color:black;
}

#joystick{
    width:120px;
    height:120px;
    border-radius:50%;
    border:3px solid #0ff;
    margin:10px auto;
    position:relative;
    touch-action:none;
}

#stick{
    width:50px;
    height:50px;
    background:#0ff;
    border-radius:50%;
    position:absolute;
    top:35px;
    left:35px;
}
</style>
</head>
<body>

<h2>üåå Claw Machine Cyberpunk</h2>

<div id="game">
    <div id="claw">
        <div class="cable"></div>
        <div class="claw-head">
            <div class="arm left-arm"></div>
            <div class="arm right-arm"></div>
        </div>
    </div>
    <div id="prize-area"></div>
</div>

<div>
Player 1: <span id="score1">0</span> |
AI: <span id="score2">0</span>
</div>

<div>üí∞ Money: <span id="money">50</span></div>

<button onclick="insertCoin()">ü™ô Insert Coin</button>
<button onclick="dropClaw()">‚¨á Drop</button>

<h3>üè™ Shop</h3>
<button onclick="buyPower()">Stronger Claw (30)</button>
<button onclick="buyMagnet()">Magnet (50)</button>
<button onclick="buyLaser()">Laser (80)</button>

<div id="joystick">
    <div id="stick"></div>
</div>

<script>
const claw=document.getElementById("claw");
const prizeArea=document.getElementById("prize-area");

let clawX=190;
let dropping=false;

let gameState={
    player:1,
    scores:{1:0,2:0}
};

let credits=0;
let money=50;
let clawPower=1;
let magnet=false;
let laser=false;
let aiEnabled=true;

const audioCtx=new(window.AudioContext||window.webkitAudioContext)();

/* CREATE PRIZES */
function createPrizes(){
    prizeArea.innerHTML="";
    for(let i=0;i<10;i++){
        let p=document.createElement("div");
        let rand=Math.random();

        if(rand<0.6){
            p.className="prize common";
            p.dataset.points=1;
            p.dataset.baseChance=0.8;
        }
        else if(rand<0.85){
            p.className="prize rare";
            p.dataset.points=3;
            p.dataset.baseChance=0.5;
        }
        else if(rand<0.97){
            p.className="prize epic";
            p.dataset.points=5;
            p.dataset.baseChance=0.3;
        }
        else{
            p.className="prize boss";
            p.dataset.points=10;
            p.dataset.baseChance=0.15;
        }

        p.style.left=Math.random()*360+"px";
        p.style.bottom=Math.random()*180+"px";
        prizeArea.appendChild(p);
    }
}
createPrizes();

/* INSERT COIN */
function insertCoin(){
    credits++;
}

/* DROP */
function dropClaw(){
    if(dropping||credits<=0)return;
    credits--;
    dropping=true;
    claw.classList.add("grab");

    let y=0;
    let interval=setInterval(()=>{
        y+=10;
        claw.style.top=y+"px";
        if(y>=420){
            clearInterval(interval);
            checkCatch();
        }
    },30);
}

/* CHECK CATCH */
function checkCatch(){
    const prizes=document.querySelectorAll(".prize");

    prizes.forEach(p=>{
        const pr=p.getBoundingClientRect();
        const cr=claw.getBoundingClientRect();

        if(cr.left<pr.right&&cr.right>pr.left){
            let centerDiff=Math.abs((cr.left+30)-(pr.left+20));
            let accuracy=Math.max(0,1-centerDiff/60);
            let finalChance=(p.dataset.baseChance*accuracy*clawPower);

            if(magnet) finalChance+=0.1;
            if(laser) finalChance=1;

            if(Math.random()<finalChance){
                let points=parseInt(p.dataset.points);
                gameState.scores[gameState.player]+=points;
                money+=points*5;
                document.getElementById("money").innerText=money;
                p.remove();
            }
        }
    });

    document.getElementById("score1").innerText=gameState.scores[1];
    document.getElementById("score2").innerText=gameState.scores[2];

    gameState.player=gameState.player===1?2:1;

    setTimeout(()=>{
        claw.style.top="0";
        claw.classList.remove("grab");
        dropping=false;

        if(aiEnabled && gameState.player===2){
            setTimeout(aiMove,1000);
        }
    },500);
}

/* AI MOVE */
function aiMove(){
    if(credits<=0)return;
    clawX=Math.random()*380;
    claw.style.left=clawX+"px";
    dropClaw();
}

/* KEYBOARD SUPPORT */
document.addEventListener("keydown",e=>{
    if(dropping)return;

    if(e.key==="ArrowLeft") clawX-=15;
    if(e.key==="ArrowRight") clawX+=15;
    if(e.key===" ") dropClaw();

    clawX=Math.max(0,Math.min(380,clawX));
    claw.style.left=clawX+"px";
});

/* JOYSTICK */
const joystick=document.getElementById("joystick");
const stick=document.getElementById("stick");

joystick.addEventListener("pointermove",e=>{
    const rect=joystick.getBoundingClientRect();
    let x=e.clientX-rect.left-60;
    x=Math.max(-40,Math.min(40,x));
    stick.style.left=(35+x)+"px";

    clawX+=x*0.05;
    clawX=Math.max(0,Math.min(380,clawX));
    claw.style.left=clawX+"px";
});

/* SHOP */
function buyPower(){
    if(money>=30){
        money-=30;
        clawPower+=0.3;
        updateMoney();
    }
}

function buyMagnet(){
    if(money>=50){
        money-=50;
        magnet=true;
        updateMoney();
    }
}

function buyLaser(){
    if(money>=80){
        money-=80;
        laser=true;
        updateMoney();
    }
}

function updateMoney(){
    document.getElementById("money").innerText=money;
}
</script>

</body>
</html>
